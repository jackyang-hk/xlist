/*!build time : 2014-05-27 4:13:06 PM*/
KISSY.add(function(a,b,c){var d=a.all,e=c.extend({initializer:function(){var b=this;b.userConfig=a.merge({},b.userConfig),b.xlist=b.userConfig.xlist,b.xlist.on("sync",function(){b.set("containerHeight",b.xlist.containerHeight),b.set("indicateHeight",b.xlist.height),b.set("offsetTop",b.xlist.getOffsetTop()),b.render(),b._bindEvt()})},render:function(){var a=this;if(!a.__isRender){a.__isRender=!0;var b=a.xlist,c="<div></div>";a.$scrollbar=d(c).css({width:"6px",position:"absolute",bottom:"2px",top:"2px",right:"1px",zIndex:999}).prependTo(b.$renderTo);var e="<div></div>";a.$indicate=d(e).css({"-webkit-box-sizing":"border-box",position:"absolute",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.9)","border-radius":"3px"}).prependTo(a.$scrollbar).css({width:"100%"}),a._update()}},_update:function(){var a=this;a.ratio=a.$scrollbar.height()/a.get("containerHeight");var b=a.get("offsetTop")*a.ratio,c=a.get("indicateHeight")*a.ratio;a.$indicate.css({transform:"translateY("+b+"px)",transition:"",height:c+"px"})},_scrollTo:function(a,b,c){var d=this;d.$indicate[0].style.webkitTransform="translateY("+a+"px)",d.$indicate[0].style.webkitTransition=[b,"s ",c," 0"].join("")},_moveTo:function(a){var b=this;b.$indicate[0].style.webkitTransform="translateY("+a+"px)",b.$indicate[0].style.webkitTransition=""},_bindEvt:function(){var a=this;a.__isEvtBind||(a.__isEvtBind=!0,a.xlist.on("drag",function(){a._moveTo(-a.xlist.getOffsetTop()*a.ratio)}),a.xlist.on("scrollTo",function(b){a._scrollTo(b.offsetTop*a.ratio,b.duration,b.easing)}),a.xlist.on("scrollEnd",function(b){a.xlist.isInSideOfBoundry()&&a._moveTo(-b.offsetTop*a.ratio)}),d(window).on("resize",function(){a._update()}),a.on("*Change",function(){a._update()}))},hide:function(){var a=this;a.$indicate.hide()},show:function(){var a=this;a.$indicate.show()}},{ATTRS:{offsetTop:{value:0},containerHeight:{value:0},indicateHeight:{value:0}}});return e},{requires:["node","base","anim"]});